# 전처리 및 EDA (노트)

전처리란 모델에 input 값으로 데이터를 넣게 위해 정제하는 과정이며 사전적 정의는 다음과 같다:

- 관측된 패턴에서 본질적인 정보를 쉽게 추출할 수 있도록 현재 주목하고자 하는 부분 패턴을 선정하거나 이 부분 패턴을 정형 하여 불필요한 정보를 분리 제거하기 위한 예비적인 조작.

  - 전처리에는 분할 잡음 제거, 정규화 등과 같은 처리가 포함된다.

  - > 한국정보통신기술협회



## 전처리가 필요한 이유:

- 세상의 모든 데이터가 정형 데이터가 아니기 때문이다.

  - `정형 데이터` 란 형식이 정해져 있는 데이터로, 데이터베이스에 이미 잘 정리가 되어 있어 바로 통계적 분석에 이용될 수 있는 데이터를 의미한다. 
    - 예) 엑셀 파일에 정리된 인구 통계 데이터

  - `비정형 데이터` 란 정형 데이터와 달리 형식이 정해지지 않은 데이터이다.
    - 날것 그대로의 데이터, raw data를 의미한다.
      - 사진, 음성, sns 또는 채팅 속에 등장하는 텍스트 등이 대표적
      - 통계 분석 자료로 쓰일 수 없기 때문에 전처리 과정을 통해 이를 정제 및 가공하여 정형화 필요
      - 머신러닝, 딥러닝 수행 과정에서 필수적인 단계

  



#### imputing (<성질 속성 등을>...에게 있다고 생각하다)

- 결측 값들을 그냥 제거하면 처리가 쉬울 수 있지만, 더 정확한 통계 분석을 위해서는 최대한 많은 양의 데이터가 필요하므로 제거하기 보다는 새로운 값으로 채우는 방법이 선호된다. 통계치 또는 외부 정보를 활용 하여 예상되는 값으로 대체해 주는 방식이다. 피처 엔지니어링이라고 한다.
- 범주형 변수 처리: 
  - 데이터는 연속형 변수와 범주형변수로 나누어지고
  - 범주형 변수는 명목형 변수와 순서형 변수로 나뉜다. 이 두 변수에 따라 전처리 방법이 달라지게 된다.
    - 명목형 변수: 항목간의 순서가 중요하지 않고 서로 구분되기만 하면 된다. 0 과 1로 간단하게 구분 가능
      OneHotEncoding (get_dummies) 를 사용하면 되겠다.
    - 순서형 변수: 데이터간의 순서 또는 레벨이 유의미함. 각 데이터를 비교할 수 있어야 하고 수학적 계산이 가능해야 함. 오름 차순 또는 내림차순 으로 숫자를 부여함



### 데이터 전처리 가이드 ([참고5](https://sites.google.com/view/1314tobigs/machine-learning/데이터-전처리와-eda), [참고7](https://wikidocs.net/16574))



# EDA (Exploratory Data Analysis) 탐색적 데이터 분석

- 여러 방면에서 데이터를 관찰하고 이해하는 과정을 의미함.
- 데이터의 요소들을 시각화 하는 것도 여기에 포함된다.
- 전처리 과정이 끝나고 정형화된 데이터에 대하여 EDA를 수행하여 요소들간의 상관관계를 파악할 수 있다.
  - matplotlib, seaborn 등이 사용된다.

- [Forbes에서 인용한 CrowdFlower의 설문 결과](http://www.forbes.com/sites/gilpress/2016/03/23/data-preparation-most-time-consuming-least-enjoyable-data-science-task-survey-says/#16ece2467f75)에 따르면 데이터 분석가는 업무 시간 중 **80%**정도를 데이터 수집 및 전처리 과정에 사용한다고 합니다.



## 이상값 탐지

이상값: `outlier` 

##### **유형**: `단변량` 과 `다변량` 

- 다변량은 n차원 공간에서의 이상값이다. 찾으려면 다차원 분포를 살펴 봐야한다.

##### **원인**: 

	1. 인공(오류) / 비자연적
 	2. 자연적

##### 데이터 세트에 미치는 영향:

- 오차 분산을 증가시키고 통계 검정의 검정력을 감소 시킨다.
- 이상값이 무작위로 분포되지 않으면 정규성이 감소 할 수 있다.
- 실질적인 관심이 있을 수있는 추정치를 편향 시키거나 영향을 줄 수 있다.
- 또한 회귀, 분산 분석 및 기타 통계 모델 가정의 기본 가정에 영향을 줄 수 있다. (참고2, 사진참고)

##### 이상값을 찾는 방법:

- 시각화 : box-plot, histogram, scatter plot
- `-1.5 x IQR ~ 1.5 x IQR` 범위를 벗어난 모든 값
- 캡핑 방법: 5 번째와 95번째 백분위 수 범위를 벗어난 값
- 평균에서 3배 이상의 표준편차가 떨어진 데이터 포인트
- 비즈니스 이해도에 따라서
- 영향 지수 또는 레버리지 또는 거리를 사용 `Mahalanobis` or `Cook's D`

#### 종속변수:

- 종속변수란 다른 변수들의 관계를 주로 추론하고, 최종적으로는 예측하고자 하는 변수

# Feature Engineering

- 기존 데이터에서 더 많은 정보를 추출하는 과학(및 예술)
- 유용한, 유의미한 데이터를 만듦

##### 변수 변환:

- scaling: 변수의 단위를 변경하고 싶거나, 변수의 분포가 편향되어(box_plot된 데이터가 한쪽으로 많이 치우쳐짐) 있을 경우, 변수간의 관계가 잘 드러나지 않는 경우에는 변수 변환의 방법을 사용.
  - 가장 자주 사용하는 방법: **Log** 함수, 유사하지만 좀 덜 자주 사용되는 **Square root** 를 취하하는 방법도 있다.

- 비닝(Binning): 변수를 분류하는데 사용
  - ex) 연봉 데이터가 수치로 존재하는 경우, 이를 100만원 미만, 101만원~200만원.. 하는 식으로 범주형 (pd.cut() 함수 사용하면 될것 같습니다.) 비즈니스의 이해도에 따라 창의적인 비닝 가능
- 기능/변수 생성 (Transform) : 기존 존재하는 변수의 성질을 이용해 다른 변수를 만드는 방법.
  - ex) 날짜: 'Year', 'Month', 'Day'.... 해당 년, 월 또는 일에 야구경기가 있는지 여부등을 추가하는 방법.

### 



## Reference

[참고1(전처리,EDA)](https://m.blog.naver.com/PostView.nhn?blogId=printfbns&logNo=221593542612&proxyReferer=https:%2F%2Fwww.google.com%2F)

[참고2(이상값, EDA)](http://blog.naver.com/PostView.nhn?blogId=paulcyp&logNo=221716963560)

[참고3(캐글, House Prices, EDA)](https://medium.com/mighty-data-science-bootcamp/eda-데이터-설명서에서-시작하기-230060b9fc17)

[참고4(EDA, FeatureEngineering)](http://www.dodomira.com/2016/10/20/how_to_eda/)

[참고5(전처리와 EDA및 전반적인 과정을 보여준 사례)](https://sites.google.com/view/1314tobigs/machine-learning/데이터-전처리와-eda)

[참고6(빅데이터강의)](http://www.datamarket.kr/xe/page_boxl99)

[참고7(데이터 전처리 가이드 및 Pandas 설명*)](https://wikidocs.net/16574)

[참고8(종속변수)](https://3months.tistory.com/325)



`